<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼€å‘æŒ‡å— - Agave Validator Documentation</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸŒªï¸</text></svg>">
</head>
<body>
    <div class="container">
        <!-- Search Bar -->
        <div class="search-container">
            <input type="text" class="search-bar" placeholder="æœç´¢æ–‡æ¡£..." id="searchInput">
            <a href="index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        </div>

        <!-- Header -->
        <header class="header">
            <h1>ğŸ’» å¼€å‘æŒ‡å—</h1>
            <p class="subtitle">AgaveéªŒè¯å™¨å¼€å‘è´¡çŒ®ä¸æ‰©å±•çš„å®Œæ•´æŒ‡å—</p>
        </header>

        <!-- Overview -->
        <div class="content">
            <h2>ğŸ¯ å¼€å‘æ¦‚è§ˆ</h2>
            <p>AgaveéªŒè¯å™¨ä½œä¸ºSolanaç½‘ç»œçš„æ ¸å¿ƒç»„ä»¶ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„è´¡çŒ®æœºä¼šã€‚æ— è®ºæ˜¯æ ¸å¿ƒåè®®æ”¹è¿›ã€æ€§èƒ½ä¼˜åŒ–è¿˜æ˜¯æ’ä»¶å¼€å‘ï¼Œéƒ½æœ‰æ¸…æ™°çš„å¼€å‘æµç¨‹å’Œæœ€ä½³å®è·µã€‚</p>
            
            <div class="alert alert-info">
                <strong>å¼€å‘ç¯å¢ƒ:</strong> AgaveåŸºäºRustè¯­è¨€å¼€å‘ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„å¼€å‘å·¥å…·é“¾å’ŒCI/CDæµç¨‹
            </div>
        </div>

        <!-- Getting Started -->
        <div class="content">
            <h2>ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
            
            <div class="pipeline-section">
                <h3>1. å¼€å‘ç¯å¢ƒè®¾ç½®</h3>
                <p>é…ç½®å®Œæ•´çš„Agaveå¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬Rustå·¥å…·é“¾ã€ä¾èµ–åº“å’Œå¼€å‘å·¥å…·ã€‚</p>
                <pre><code># å®‰è£…Rustå·¥å…·é“¾
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env

# å®‰è£…å¿…è¦ç»„ä»¶
rustup component add rustfmt clippy
rustup toolchain install nightly

# å…‹éš†Agaveä»“åº“
git clone https://github.com/anza-xyz/agave.git
cd agave

# å®‰è£…å¼€å‘ä¾èµ–
./scripts/cargo-install-all.sh</code></pre>
                <ul>
                    <li><strong>Rustå·¥å…·é“¾:</strong> æœ€æ–°ç¨³å®šç‰ˆå’Œnightlyç‰ˆæœ¬</li>
                    <li><strong>å¼€å‘å·¥å…·:</strong> rustfmtã€clippyã€IDEæ’ä»¶</li>
                    <li><strong>æµ‹è¯•ç¯å¢ƒ:</strong> æœ¬åœ°æµ‹è¯•ç½‘ç»œé…ç½®</li>
                    <li><strong>CIå·¥å…·:</strong> GitHub Actionså·¥ä½œæµ</li>
                </ul>
            </div>

            <div class="pipeline-section">
                <h3>2. é¡¹ç›®ç»“æ„</h3>
                <div class="alert alert-success">
                    <strong>ä»£ç ç»„ç»‡:</strong> Agaveé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºç†è§£å’Œè´¡çŒ®
                </div>
                <pre><code>agave/
â”œâ”€â”€ core/           # æ ¸å¿ƒéªŒè¯å™¨é€»è¾‘
â”œâ”€â”€ runtime/        # SVMè¿è¡Œæ—¶
â”œâ”€â”€ ledger/         # è´¦æœ¬å­˜å‚¨ä¸ç®¡ç†
â”œâ”€â”€ rpc/           # RPCæœåŠ¡æ¥å£
â”œâ”€â”€ gossip/        # ç½‘ç»œé€šä¿¡åè®®
â”œâ”€â”€ poh/           # Proof of History
â”œâ”€â”€ streamer/      # ç½‘ç»œæ•°æ®æµ
â”œâ”€â”€ banking-stage/ # äº¤æ˜“å¤„ç†æµæ°´çº¿
â”œâ”€â”€ tpu/           # äº¤æ˜“å¤„ç†å•å…ƒ
â”œâ”€â”€ tvu/           # äº¤æ˜“éªŒè¯å•å…ƒ
â””â”€â”€ programs/      # å†…ç½®ç¨‹åº</code></pre>
                <ul>
                    <li>æ ¸å¿ƒéªŒè¯å™¨ç»„ä»¶</li>
                    <li>ç½‘ç»œåè®®æ ˆ</li>
                    <li>å­˜å‚¨ç³»ç»Ÿ</li>
                    <li>RPCæ¥å£å±‚</li>
                </ul>
            </div>

            <div class="pipeline-section">
                <h3>3. æ„å»ºä¸æµ‹è¯•</h3>
                <pre><code># å®Œæ•´æ„å»º
cargo build --release

# è¿è¡Œæµ‹è¯•å¥—ä»¶
cargo test

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test --package solana-core --test test_name

# æ€§èƒ½åŸºå‡†æµ‹è¯•
cargo bench</code></pre>
                <ul>
                    <li>å¢é‡ç¼–è¯‘ä¼˜åŒ–</li>
                    <li>å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ</li>
                    <li>æ€§èƒ½å›å½’æ£€æµ‹</li>
                    <li>ä»£ç è¦†ç›–ç‡åˆ†æ</li>
                </ul>
            </div>
        </div>

        <!-- Contribution Workflow -->
        <div class="content">
            <h2>ğŸ”„ è´¡çŒ®æµç¨‹</h2>
            
            <div class="optimization-section">
                <h3>1. Forkä¸åˆ†æ”¯ç®¡ç†</h3>
                <pre><code># Forkä»“åº“å¹¶å…‹éš†
git clone https://github.com/your-username/agave.git
cd agave

# æ·»åŠ ä¸Šæ¸¸ä»“åº“
git remote add upstream https://github.com/anza-xyz/agave.git

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name

# ä¿æŒåˆ†æ”¯æœ€æ–°
git fetch upstream
git rebase upstream/master</code></pre>
                <ul>
                    <li><strong>åˆ†æ”¯å‘½å:</strong> feature/ã€fix/ã€docs/ å‰ç¼€</li>
                    <li><strong>æäº¤æ¶ˆæ¯:</strong> æ¸…æ™°æè¿°å˜æ›´å†…å®¹</li>
                    <li><strong>å˜æ›´èŒƒå›´:</strong> å•ä¸€èŒè´£åŸåˆ™</li>
                    <li><strong>ä»£ç è´¨é‡:</strong> é€šè¿‡æ‰€æœ‰æ£€æŸ¥</li>
                </ul>
            </div>

            <div class="optimization-section">
                <h3>2. ä»£ç è§„èŒƒ</h3>
                <div class="alert alert-warning">
                    <strong>ä»£ç è´¨é‡:</strong> éµå¾ªRustæœ€ä½³å®è·µå’Œé¡¹ç›®ç‰¹å®šçš„ç¼–ç è§„èŒƒ
                </div>
                <pre><code># ä»£ç æ ¼å¼åŒ–
cargo fmt

# é™æ€åˆ†æ
cargo clippy -- -D warnings

# æ–‡æ¡£ç”Ÿæˆ
cargo doc --no-deps

# å®‰å…¨å®¡è®¡
cargo audit</code></pre>
                <ul>
                    <li>Rustå®˜æ–¹é£æ ¼æŒ‡å—</li>
                    <li>Clippyé™æ€åˆ†æ</li>
                    <li>APIæ–‡æ¡£å®Œæ•´æ€§</li>
                    <li>å®‰å…¨æœ€ä½³å®è·µ</li>
                </ul>
            </div>

            <div class="pipeline-section">
                <h3>3. Geyseræ’ä»¶å¼€å‘</h3>
                <p>Geyseræ’ä»¶ç³»ç»Ÿå…è®¸å¼€å‘è€…è®¢é˜…è´¦æˆ·å˜æ›´ã€äº¤æ˜“å’ŒåŒºå—æ•°æ®ï¼Œå®ç°å®æ—¶æ•°æ®å¤„ç†ã€‚</p>
                <pre><code>use solana_geyser_plugin_interface::geyser_plugin_interface::{
    GeyserPlugin, GeyserPluginError, Result as PluginResult,
};

pub struct MyGeyserPlugin {
    // æ’ä»¶çŠ¶æ€
}

impl GeyserPlugin for MyGeyserPlugin {
    fn name(&self) -> &'static str {
        "my-geyser-plugin"
    }
    
    fn on_load(&mut self, config_file: &str) -> PluginResult<()> {
        // æ’ä»¶åˆå§‹åŒ–
        Ok(())
    }
    
    fn update_account(
        &mut self,
        account: ReplicaAccountInfoVersions,
        slot: Slot,
        is_startup: bool,
    ) -> PluginResult<()> {
        // å¤„ç†è´¦æˆ·æ›´æ–°
        Ok(())
    }
}</code></pre>
                <ul>
                    <li><strong>æ¥å£å®ç°:</strong> GeyserPlugin trait</li>
                    <li><strong>äº‹ä»¶å¤„ç†:</strong> è´¦æˆ·ã€äº¤æ˜“ã€åŒºå—äº‹ä»¶</li>
                    <li><strong>é…ç½®ç®¡ç†:</strong> JSONé…ç½®æ–‡ä»¶</li>
                    <li><strong>é”™è¯¯å¤„ç†:</strong> æ’ä»¶å¼‚å¸¸ç®¡ç†</li>
                </ul>
            </div>
        </div>

        <!-- Testing Framework -->
        <div class="content">
            <h2>ğŸ§ª æµ‹è¯•æ¡†æ¶</h2>
            
            <div class="optimization-section">
                <h3>1. å•å…ƒæµ‹è¯•</h3>
                <p>Agaveé‡‡ç”¨Rustå†…ç½®æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒå¹¶è¡Œæµ‹è¯•å’Œç²¾ç¡®çš„æ–­è¨€ã€‚</p>
                <pre><code>#[cfg(test)]
mod tests {
    use super::*;
    
    #[test]
    fn test_transaction_processing() {
        // æµ‹è¯•äº¤æ˜“å¤„ç†é€»è¾‘
        let tx = create_test_transaction();
        let result = process_transaction(&tx);
        assert!(result.is_ok());
    }
    
    #[test]
    #[ignore] // é•¿æ—¶é—´è¿è¡Œçš„æµ‹è¯•
    fn test_performance_benchmark() {
        // æ€§èƒ½åŸºå‡†æµ‹è¯•
    }
}</code></pre>
                <ul>
                    <li><strong>æµ‹è¯•ç»„ç»‡:</strong> æ¨¡å—å†…æµ‹è¯•å’Œé›†æˆæµ‹è¯•</li>
                    <li><strong>Mockå¯¹è±¡:</strong> å¤–éƒ¨ä¾èµ–çš„æ¨¡æ‹Ÿ</li>
                    <li><strong>å¹¶å‘æµ‹è¯•:</strong> å¤šçº¿ç¨‹å®‰å…¨æ€§éªŒè¯</li>
                    <li><strong>é”™è¯¯è·¯å¾„:</strong> å¼‚å¸¸æƒ…å†µå¤„ç†æµ‹è¯•</li>
                </ul>
            </div>

            <div class="optimization-section">
                <h3>2. é›†æˆæµ‹è¯•</h3>
                <div class="alert alert-info">
                    <strong>ç«¯åˆ°ç«¯æµ‹è¯•:</strong> éªŒè¯ç»„ä»¶é—´çš„åä½œå’Œç³»ç»Ÿçº§åŠŸèƒ½
                </div>
                <pre><code># å¯åŠ¨æµ‹è¯•éªŒè¯å™¨
solana-test-validator --reset

# è¿è¡Œé›†æˆæµ‹è¯•
cargo test --package solana-local-cluster --test local_cluster

# ç½‘ç»œæµ‹è¯•
cargo test --package solana-gossip --test test_gossip_integration</code></pre>
                <ul>
                    <li>æœ¬åœ°é›†ç¾¤æµ‹è¯•</li>
                    <li>ç½‘ç»œåè®®æµ‹è¯•</li>
                    <li>å…±è¯†æœºåˆ¶éªŒè¯</li>
                    <li>RPCæ¥å£æµ‹è¯•</li>
                </ul>
            </div>

            <div class="optimization-section">
                <h3>3. è°ƒè¯•æŠ€æœ¯</h3>
                <pre><code># è®¾ç½®æ—¥å¿—çº§åˆ«
export RUST_LOG=solana_core=debug,solana_banking_stage=trace

# å¯åŠ¨éªŒè¯å™¨ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰
solana-validator --log - --log-level debug

# GDBè°ƒè¯•
gdb ./target/release/solana-validator
(gdb) run --ledger /tmp/ledger</code></pre>
                <ul>
                    <li><strong>åˆ†çº§æ—¥å¿—:</strong> errorã€warnã€infoã€debugã€trace</li>
                    <li><strong>äº¤äº’å¼è°ƒè¯•:</strong> GDBã€LLDBè°ƒè¯•å™¨</li>
                    <li><strong>æ€§èƒ½åˆ†æ:</strong> perfã€valgrindå·¥å…·</li>
                    <li><strong>å†…å­˜æ£€æŸ¥:</strong> AddressSanitizerã€Miri</li>
                </ul>
            </div>
        </div>

        <!-- Best Practices -->
        <div class="content">
            <h2>ğŸ¯ æœ€ä½³å®è·µ</h2>
            
            <div class="optimization-section">
                <h3>1. ä»£ç è´¨é‡</h3>
                <ul>
                    <li><strong>å•ä¸€èŒè´£:</strong> æ¯ä¸ªå‡½æ•°ä¸“æ³¨å•ä¸€åŠŸèƒ½</li>
                    <li><strong>é”™è¯¯å¤„ç†:</strong> å®Œå–„çš„é”™è¯¯ä¼ æ’­æœºåˆ¶</li>
                    <li><strong>ç±»å‹å®‰å…¨:</strong> å……åˆ†åˆ©ç”¨Rustç±»å‹ç³»ç»Ÿ</li>
                    <li><strong>æ€§èƒ½è€ƒè™‘:</strong> é¿å…ä¸å¿…è¦çš„å†…å­˜åˆ†é…</li>
                </ul>
            </div>

            <div class="optimization-section">
                <h3>2. åä½œè§„èŒƒ</h3>
                <ul>
                    <li><strong>PRæ¨¡æ¿:</strong> è¯¦ç»†æè¿°å˜æ›´å†…å®¹å’Œå½±å“</li>
                    <li><strong>ä»£ç å®¡æŸ¥:</strong> å…³æ³¨å®‰å…¨æ€§å’Œæ€§èƒ½å½±å“</li>
                    <li><strong>æµ‹è¯•è¦†ç›–:</strong> æ–°åŠŸèƒ½å¿…é¡»åŒ…å«æµ‹è¯•</li>
                    <li><strong>æ–‡æ¡£æ›´æ–°:</strong> åŒæ­¥æ›´æ–°ç›¸å…³æ–‡æ¡£</li>
                </ul>
            </div>

            <div class="optimization-section">
                <h3>3. ç¤¾åŒºå‚ä¸</h3>
                <ul>
                    <li><strong>Discordè®¨è®º:</strong> æŠ€æœ¯é—®é¢˜å’Œè®¾è®¡è®¨è®º</li>
                    <li><strong>GitHub Issues:</strong> BugæŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚</li>
                    <li><strong>æŠ€æœ¯åšå®¢:</strong> åˆ†äº«å¼€å‘ç»éªŒå’Œè§è§£</li>
                    <li><strong>ä¼šè®®æ¼”è®²:</strong> æ¨å¹¿æŠ€æœ¯åˆ›æ–°æˆæœ</li>
                </ul>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>AgaveéªŒè¯å™¨æ–‡æ¡£ä¸­å¿ƒ â€¢ ä¸ºSolanaç”Ÿæ€å¼€å‘å’ŒéªŒè¯å™¨è¿è¥è€Œåˆ›å»º</p>
            <p>ğŸŒªï¸ åŠ©åŠ›æ„å»ºé«˜æ€§èƒ½åŒºå—é“¾ç½‘ç»œï¼Œæ”¯æ’‘Web3æœªæ¥</p>
        </footer>

        <!-- Theme Toggle Button -->
        <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢æ·±è‰²æ¨¡å¼">
            ğŸŒ“
        </button>
    </div>

    <script>
        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const sections = document.querySelectorAll('.content, .pipeline-section, .optimization-section');
            
            sections.forEach(section => {
                const text = section.textContent.toLowerCase();
                if (text.includes(searchTerm) || searchTerm === '') {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
        });

        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', function() {
            document.body.classList.toggle('dark-theme');
            localStorage.setItem('darkTheme', document.body.classList.contains('dark-theme'));
        });

        // Load saved theme
        if (localStorage.getItem('darkTheme') === 'true') {
            document.body.classList.add('dark-theme');
        }

        // Copy code functionality
        document.querySelectorAll('pre code').forEach(block => {
            const button = document.createElement('button');
            button.className = 'copy-button';
            button.textContent = 'å¤åˆ¶';
            button.addEventListener('click', function() {
                navigator.clipboard.writeText(block.textContent);
                button.textContent = 'å·²å¤åˆ¶!';
                setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
            });
            block.parentNode.appendChild(button);
        });

        // Add loading indicator for navigation
        document.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', function(e) {
                if (!this.href.startsWith('#')) {
                    const loading = document.createElement('div');
                    loading.className = 'loading';
                    this.appendChild(loading);
                }
            });
        });
    </script>
</body>
</html> 